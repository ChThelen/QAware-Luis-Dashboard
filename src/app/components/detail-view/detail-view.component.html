<div *ngIf="luisApp" class="clr-row clr-align-items-start clr-justify-content-start">
    <div class="clr-col clr-col-auto">
        <div class="card">
            <div class="card-header">
                Details
            </div>
            <div class="card-block">
                <div class="card-title">
                    <h2 style="margin-top: 0rem;">{{luisApp.name}}</h2>
                    <h3 style="margin-top: 0; color: hsl(198, 0%, 70%);">
                        <span>ID:</span> {{luisApp.appID}}
                    </h3>
                </div>
                <div class="card-text">
                    <div><span class="p4">Version: </span>{{luisApp.version}}</div>
                    <div><span class="p4">Dashbord-URL: </span><a
                            href="{{luisApp.dashboardUrl}}">{{luisApp.dashboardUrl}}</a></div>
                    <div><span class="p4">Description: </span>{{luisApp.description}}</div>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-link" (click)="deleteModal=true">Delete</button>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                JSON
            </div>
            <div class="card-block">
                <div class="card-text">
                    <pre
                        style="overflow-x: scroll;max-height: 270px;"><code [highlight]="luisApp.appJson | json"></code></pre>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-link" (click)="jsonModal=true">View More</button>
                <button class="btn btn-sm btn-link" (click)="donwloadJsonFile()">Download</button>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                Test Results
            </div>
            <div class="card-block">
                <div class="card-text">
                    <clr-datagrid>
                        <clr-dg-column [clrDgField]="'version'">Version</clr-dg-column>
                        <clr-dg-column [clrDgField]="'date'">Date</clr-dg-column>
                        <clr-dg-column [clrDgField]="'intent'">Intent</clr-dg-column>
                        <clr-dg-column [clrDgField]="'average'">Average</clr-dg-column>
                        <clr-dg-column [clrDgField]="'difference'">Difference</clr-dg-column>

                        <clr-dg-row *clrDgItems="let appStat of luisAppStats">
                            <clr-dg-cell>{{appStat.version}}</clr-dg-cell>
                            <clr-dg-cell>{{appStat.date | date:"short"}}</clr-dg-cell>
                            <clr-dg-cell>{{appStat.intent}}</clr-dg-cell>
                            <clr-dg-cell>{{appStat.average}}</clr-dg-cell>
                            <clr-dg-cell>{{appStat.difference}}</clr-dg-cell>
                        </clr-dg-row>

                        <clr-dg-placeholder>Sorry. No test results was found.</clr-dg-placeholder>
                    </clr-datagrid>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-sm btn-link">Test</button>
            </div>
        </div>
    </div>
    <div class="clr-col-4">
        <div class="card">
            <div class="card-header">
                Charts
            </div>
            <div class="card-block">
                <div class="card-text">
                    <div class="chart-wrapper" *ngIf="chartData">
                        <canvas baseChart [datasets]="chartData" [labels]="chartLabels" [options]="chartOptions"
                            [legend]="chartLegend" [chartType]="'bar'" [colors]="chartColors">
                        </canvas>
                    </div>
                    <div class="chart-wrapper" *ngIf="chartData">
                        <canvas baseChart [datasets]="chartData" [labels]="chartLabels" [options]="chartOptions"
                            [legend]="chartLegend" [chartType]="'line'" [colors]="chartColors">
                        </canvas>
                    </div>
                    <div class="chart-wrapper" *ngIf="chartData">
                        <canvas baseChart [datasets]="chartData" [labels]="chartLabels" [options]="chartOptions"
                            [legend]="chartLegend" [chartType]="'radar'" [colors]="chartColors">
                        </canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<clr-modal *ngIf="luisApp" [clrModalSize]="'xl'" [(clrModalOpen)]="jsonModal" [clrModalStaticBackdrop]="true">
    <h3 class="modal-title">{{luisApp.name}}</h3>
    <div class="modal-body">
        <pre style="overflow-x: scroll;"><code [highlight]="luisApp.appJson | json"></code></pre>
    </div>
</clr-modal>

<clr-modal *ngIf="luisApp" [(clrModalOpen)]="deleteModal" [clrModalStaticBackdrop]="true">
    <h3 class="modal-title">Delete App {{luisApp.name}}</h3>
    <div class="modal-body">
        <div class="alert alert-danger" role="alert">
            <div class="alert-items">
                <div class="alert-item static">
                    <div class="alert-icon-wrapper">
                        <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                    </div>
                    <span class="alert-text">
                        Are you sure you want to delete this app?
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-outline" type="button" (click)="deleteModal = false">Cancel</button>
        <button class="btn btn-danger" type="button" (click)="deleteApp()">Delete</button>
    </div>
</clr-modal>